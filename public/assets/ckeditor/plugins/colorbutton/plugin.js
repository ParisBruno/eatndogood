/**
 * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"bgcolor,textcolor",hidpi:!0,init:function(t){function e(e){var r,s=e.name,i=e.type,u=e.title,d=e.order,f=e.commandName,g=e.contentTransformations||{},p=new CKEDITOR.style(a["colorButton_"+i+"Style"]),m=CKEDITOR.tools.getNextId()+"_colorBox",b={type:i},C=new CKEDITOR.style(a["colorButton_"+i+"Style"],{color:"inherit"});t.addCommand(f,{contextSensitive:!0,exec:function(t,e){if(!t.readOnly){var o=e.newStyle;t.removeStyle(C),t.focus(),o&&t.applyStyle(o),t.fire("saveSnapshot")}},refresh:function(t,e){C.checkApplicable(e,t,t.activeFilter)?C.checkActive(e,t)?this.setState(CKEDITOR.TRISTATE_ON):this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}}),t.ui.add(s,CKEDITOR.UI_PANELBUTTON,{label:u,title:u,command:f,editorFocus:0,toolbar:"colors,"+d,allowedContent:p,requiredContent:p,contentTransformations:g,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":c.panelTitle}},select:function(t){var e=a.colorButton_colors.split(","),o=CKEDITOR.tools.array.find(e,t);o=l(o),n(r,o),r._.markFirstDisplayed()},onBlock:function(e,n){r=n,n.autoSize=!0,n.element.addClass("cke_colorblock"),n.element.setHtml(o({type:i,colorBoxId:m,colorData:b,commandName:f})),n.element.getDocument().getBody().setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var l=n.keys,a="rtl"==t.lang.dir;l[a?37:39]="next",l[40]="next",l[9]="next",l[a?39:37]="prev",l[38]="prev",l[CKEDITOR.SHIFT+9]="prev",l[32]="click"},onOpen:function(){var e,o=t.getSelection(),c=o&&o.getStartElement(),s=t.elementPath(c);if(!s)return null;c=s.block||s.blockLimit||t.document.getBody();do{e=c&&c.getComputedStyle("back"==i?"background-color":"color")||"transparent"}while("back"==i&&"transparent"==e&&c&&(c=c.getParent()));e&&"transparent"!=e||(e="#ffffff"),!1!==a.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(m).setStyle("background-color",e);var u=o&&o.getRanges()[0];if(u){for(var d,f=new CKEDITOR.dom.walker(u),g=u.collapsed?u.startContainer:f.next(),p="";g;){if(g.type!==CKEDITOR.NODE_ELEMENT&&(g=g.getParent()),d=l(g.getComputedStyle("back"==i?"background-color":"color")),(p=p||d)!==d){p="";break}g=f.next()}"transparent"==p&&(p=""),"fore"==i&&(b.automaticTextColor="#"+l(e)),b.selectionColor=p?"#"+p:"",n(r,p)}return e}})}function o(e){function o(e){var o=e&&new CKEDITOR.style(m,{color:e});t.execCommand(i,{newStyle:o})}var n=e.type,l=e.colorBoxId,s=e.colorData,i=e.commandName,u=[],d=a.colorButton_colors.split(","),f=a.colorButton_colorsPerRow||6,g=t.plugins.colordialog&&!1!==a.colorButton_enableMore,p=d.length+(g?2:1),m=t.config["colorButton_"+n+"Style"];m.childRule="back"==n?function(t){return r(t)}:function(t){return!(t.is("a")||t.getElementsByTag("a").count())||r(t)};var b=CKEDITOR.tools.addFunction(function(e){t.focus(),t.fire("saveSnapshot"),"?"==e?t.getColorFromDialog(function(t){t&&o(t)},null,s):o(e&&"#"+e)});!1!==a.colorButton_enableAutomatic&&u.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',c.auto,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',b,",null,'",n,"');return false;\" href=\"javascript:void('",c.auto,'\')" role="option" aria-posinset="1" aria-setsize="',p,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td colspan="'+f+'" align="center"><span class="cke_colorbox" id="',l,'"></span>',c.auto,"</td></tr></table></a>"),u.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var C=0;C<d.length;C++){C%f==0&&u.push("</tr><tr>");var T,k=d[C].split("/"),y=k[0],E=k[1]||y;T=k[1]?y:t.lang.colorbutton.colors[E]||E,u.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',T,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',b,",'",E,"','",n,"'); return false;\" href=\"javascript:void('",E,'\')" data-value="'+E+'" role="option" aria-posinset="',C+2,'" aria-setsize="',p,'"><span class="cke_colorbox" style="background-color:#',E,'"></span></a></td>')}return g&&u.push('</tr><tr><td colspan="'+f+'" align="center"><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',c.more,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',b,",'?','",n,"');return false;\" href=\"javascript:void('",c.more,"')\"",' role="option" aria-posinset="',p,'" aria-setsize="',p,'">',c.more,"</a></td>"),u.push("</tr></table>"),u.join("")}function r(t){return"false"==t.getAttribute("contentEditable")||t.getAttribute("data-nostyle")}function n(t,e){for(var o=t._.getItems(),r=0;r<o.count();r++){var n=o.getItem(r);n.removeAttribute("aria-selected"),e&&e==l(n.getAttribute("data-value"))&&n.setAttribute("aria-selected",!0)}}function l(t){return CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(t||"")).replace(/#/g,"")}var a=t.config,c=t.lang.colorbutton;if(!CKEDITOR.env.hc){e({name:"TextColor",type:"fore",commandName:"textColor",title:c.textColorTitle,order:10,contentTransformations:[[{element:"font",check:"span{color}",left:function(t){return!!t.attributes.color},right:function(t){t.name="span",t.attributes.color&&(t.styles.color=t.attributes.color),delete t.attributes.color}}]]});var s,i=t.config.colorButton_normalizeBackground;(i===undefined||i)&&(s=[[{element:"span",left:function(t){var e=CKEDITOR.tools;if("span"!=t.name||!t.styles||!t.styles.background)return!1;var o=e.style.parse.background(t.styles.background);return o.color&&1===e.object.keys(o).length},right:function(e){var o=new CKEDITOR.style(t.config.colorButton_backStyle,{color:e.styles.background}).getDefinition();return e.name=o.element,e.styles=o.styles,e.attributes=o.attributes||{},e}}]]),e({name:"BGColor",type:"back",commandName:"bgColor",title:c.bgColorTitle,order:20,contentTransformations:s})}}}),CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};