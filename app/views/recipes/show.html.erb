<style>
  .recipe-summary {
    word-wrap: break-word;
  }
  .buy-button form{
    padding: 10px !important;
  }
  .fa-shopping-cart { 
    transform: scale(-1, 1);
  }
  .recipe-title {
    font-family: MillerDisplay-Roman;
  }
  .box-content-font {
    padding-left: 10px;
    padding-right: 10px;
  }
  @media screen and (min-width: 768px) {
   .col-md-3.thumb-sec {
      position: absolute;
      right: -36%;
      top: 0;
    }
    .col-md-3 {
      max-width: 35%;
    }
    .recipe-detail .image-box-shadow {
      padding: 5px;
    }
  }
  @media (max-width: 1024px) and (min-width: 768px) {
    .col-md-3.thumb-sec {
      right: -50%;
    }
  }
  @media screen and (max-width: 600px) {
    .buy-button {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index:100;
      font-size: 18px;
      max-width: 328px;
      width: 280px;
      height: 48px;
      border-radius: 30px;
      background-color: #555;
      font-weight: 600;
    }
    .recipe-title {
      color: #f04123;
      text-align: center;
    }
    .margin-sec .top-space {
      margin-top: <%= app_user_signed_in? ? '60px' : '0' %>;
      margin-bottom: 10px;
    }
  }
  .buy-button button {
    padding: 10px 25px;
    background: #6ee06e;
    background-image: -webkit-linear-gradient(top, #6ee06e, #449d44);
    background-image: -moz-linear-gradient(top, #6ee06e, #449d44);
    background-image: -ms-linear-gradient(top, #6ee06e, #449d44);
    background-image: -o-linear-gradient(top, #6ee06e, #449d44);
    background-image: linear-gradient(to bottom, #6ee06e, #449d44);
    -webkit-border-radius: 8;
    -moz-border-radius: 8;
    border-radius: 8px;
    font-family: 'Montserrat', sans-serif;
    color: #ffffff;
    font-size: 20px;
    padding: 10px 20px 10px 20px;
    text-decoration: none;
  }
  .buy-button button:hover {
    background: #64dc3b;
    background-image: -webkit-linear-gradient(top, #64dc3b, #64dc3b);
    background-image: -moz-linear-gradient(top, #64dc3b, #64dc3b);
    background-image: -ms-linear-gradient(top, #64dc3b, #64dc3b);
    background-image: -o-linear-gradient(top, #64dc3b, #64dc3b);
    background-image: linear-gradient(to bottom, #64dc3b, #64dc3b);
    text-decoration: none;
  }
</style>
  <div class="margin-sec top-space">
     <div class="col-md-12 margin-sec top-space recipe-detail">
     <div class="row">
      <div class="col-md-9 col-sm-12 col-xs-12 detail-sec mb-5">
      <div class="box-inner-sec well box-content">

       <div class="col-md-3 col-sm-12 col-xs-12 thumb-sec">
      <% if @recipe.food_image.attached? %>
        <div class="image-box-shadow">
          <%=image_tag(@recipe.food_image, class:'img', alt: t('common.no_image')) %>
        </div>
      <% end %>
      </div>
      <div class="detail-list">
      <% if (current_app_user and (@recipe.chef.id == current_app_user.id) || current_app_user.admin?) %>
        <%= link_to t('recipes.delete_recipe'), [current_app, @recipe], class: "btn btn-danger pull-right  btn-lg", style:"margin-right:100px; font-family: WhitneySSm;",  method: :delete, data: { confirm: t('common.confirm') } %>
      <% end %>

      
      <% if (current_app_user and (@recipe.chef.id == current_app_user.id)|| current_app_user.admin? ) %>
        <%= link_to t('recipes.edit_recipe'), edit_app_recipe_path(current_app, @recipe), class: "btn btn-success pull-right btn-lg", style: 'font-family: WhitneySSm;' %>
      <% end %>
 

      <center class="box-content-font" style="margin-bottom:0;">
        <h1 class='recipe-title'>
          <%= @recipe.name %>
        </h1>
      </center>

      <h2 class="recipe-summary box-content-font">
        <%= sanitize(@recipe.summary) %>
      </h2>
      <% unless @recipe.price.zero? %>
        <h2 class="box-content-font" style="margin-top: 0 !important;">
          <%= t('recipes.price') %>: <span class="badge badge-primary"><%= number_to_currency(@recipe.price) %></span>
        </h2>
      <% end %>
      <div class="well-sec u-content box-content-font">
        <p style="font-family: Garamond; font-size:18px;">
          <%= simple_format(@recipe.description) %>
        </p>
        <div class="chef_info center">
        </div>
      </div>
      </div>
      </div>
      </div>
     
      

      </div>
      </div>
  </div>

<div class="row w-100 text-center buy-button">
  <% unless @recipe.price.zero? %>
    <% unless @recipe.is_draft %>
      <%= button_to line_items_path(recipe_id: @recipe.id), params: { app: current_app.slug }, class: "btn btn-#{@current_cart.line_items.count == 0 ? 'secondary' : 'success'} btn-lg", style: 'font-family: WhitneySSm;' do %>
        <%= @current_cart.line_items.count == 0 ? t('recipes.start_order') : t('recipes.add_to_cart') %> <span class="fa fa-shopping-cart"></span>
      <% end %>
    <% else %>
        <%= link_to t('recipes.add_to_cart'), new_app_user_registration_path(current_app), { class: 'btn btn-success btn-lg'} %>
    <% end %>
  <% end %>
</div>

<div class="row w-100 justify-content-center">
  <% unless @recipe.is_draft %>
  <% if session[:user_role] != 'super_admin' %>
  <div class="recipes-q">
 
    <center>
          <% if current_app_user && current_app_user.id != @recipe.chef.id %>
            <h3>
              <a href="<%= new_app_question_path(@recipe, user_id: current_app_user.id, email: @recipe.chef.user.email, recipe_id: @recipe.id) %>">
                <%= t('recipes.question_about_this_recipe') %>
              </a>
            </h3>

            <% if @recipe.is_reservation_enable %>
              <h3>
<%
=begin%>
 <a href="<%= new_app_reservation_path(current_app, @recipe, user_id: current_app_user.id, email: @recipe.chef.admin_user.email, recipe_id: @recipe.id, type: "reservation") %>" class="btn btn-success">
                  <%= t('reservations.make_reservation')%>
                </a> 
<%
=end%>
              </h3>
              <% end %>

              <% if @recipe.is_ask_catering_enable %>
                <h3>
<%
=begin%>
 <a href="<%= new_app_reservation_path(current_app, @recipe, user_id: current_app_user.id, email: @recipe.chef.admin_user.email, recipe_id: @recipe.id, type: "catering") %>" class="btn btn-success">
                    <%= t('reservations.make_catering') %>
                  </a> 
<%
=end%>
                </h3>
                <% end %>

          <% end %>
          
          <% unless @recipe.price.zero? %>
            <h3>
              <%= link_to image_tag('buy_gift_card.jpg', size: "240x130"), current_app_user ? new_app_gift_card_path(current_app) : new_app_user_registration_path(current_app) %>
            </h3>
          <% end %>
          <br>
          <%= render 'shared_links' %>

          <%
=begin%>
 <%= link_to like_app_recipe_path(current_app, @recipe, like: true), method: :post, :style => "font-size:30px; color: #337ab7 !important" do %>
            <i class="glyphicon glyphicon-thumbs-up" ></i>
            &nbsp;
            <%= @recipe.thumbs_up_total %>
          <% end %>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <%= link_to like_app_recipe_path(current_app, @recipe, like: false), method: :post,:style => "font-size:30px; color: #337ab7 !important" do %>
              <i class="glyphicon glyphicon-thumbs-down"></i>
              &nbsp;
              <%= @recipe.thumbs_down_total %>
          <% end %> 
<%
=end%>
     
    </center>
  </div>
  <% end %>
<% end %> 
</div>

<center>
  <h5>
    <% if session[:user_role] == 'super_admin' %>
      <%= link_to t('recipes.return_to_recipes_listing'), allrecipe_path, class: 'btn btn-primary btn-lg', style: "color:white !important" %>
    <% else %>
      <%= link_to t('recipes.return_to_recipes_listing'), app_recipes_path(current_app), class: 'btn btn-primary btn-lg', style: "color:white !important" %>
    <% end %>
  </h5>
  <br><br><br><br><br>
</center>
